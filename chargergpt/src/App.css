.chat-root { --radius:14px; --radius-tight:10px; --gap-1:6px; --gap-2:10px; --gap-3:16px; --gap-4:20px; --max-msg-width:700px; --max-image-width:500px; --font:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif; --font-mono:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; --text-size:15px; --timestamp-size:12px; --bg:#f7f7f9; --surface:#ffffff; --surface-2:#f1f2f5; --border:#e5e7eb; --text:#111827; --muted:#6b7280; --muted-2:#9ca3af; --accent:#2b7fff; --accent-contrast:#ffffff; --bot-bubble:#ffffff; --user-bubble:#2b7fff; --user-text:#ffffff; --system-bubble:#eef2ff; --shadow-1:0 1px 2px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.06); --shadow-2:0 6px 18px rgba(0,0,0,0.08); --sidebar-w:280px; --center-nudge:-20px; }
@media (prefers-color-scheme: dark){ .chat-root.theme-auto{ --bg:#0f1115; --surface:#141821; --surface-2:#0e121a; --border:#2a2f3a; --text:#e5e7eb; --muted:#a3a8b4; --muted-2:#7b8190; --accent:#7aa2ff; --accent-contrast:#0b1020; --bot-bubble:#1a2030; --user-bubble:#7aa2ff; --user-text:#0b1020; --system-bubble:#101827; --shadow-1:0 1px 2px rgba(0,0,0,0.35),0 2px 6px rgba(0,0,0,0.25); --shadow-2:0 6px 18px rgba(0,0,0,0.25); } }
.chat-root.theme-dark{ --bg:#0f1115; --surface:#141821; --surface-2:#0e121a; --border:#2a2f3a; --text:#e5e7eb; --muted:#a3a8b4; --muted-2:#7b8190; --accent:#7aa2ff; --accent-contrast:#0b1020; --bot-bubble:#1a2030; --user-bubble:#7aa2ff; --user-text:#0b1020; --system-bubble:#101827; --shadow-1:0 1px 2px rgba(0,0,0,0.35),0 2px 6px rgba(0,0,0,0.25); --shadow-2:0 6px 18px rgba(0,0,0,0.25); }
.chat-root{ font-family:var(--font); background:var(--bg); color:var(--text); height:100dvh; display:grid; grid-template-rows:auto 1fr; overflow:hidden; }
.chat-header{ position:sticky; top:0; z-index:50; display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:var(--gap-3); padding:10px 14px; background:var(--surface); border-bottom:1px solid var(--border); }
.chat-header .title-group{ min-width:0; }
.chat-header .app-title{ font-size:16px; font-weight:700; margin:0; letter-spacing:.2px; }
.chat-header .subtitle{ font-size:12px; color:var(--muted); }
.icon-btn,.text-btn{ appearance:none; border:1px solid var(--border); background:var(--surface); color:var(--text); padding:8px 10px; border-radius:999px; cursor:pointer; display:inline-flex; align-items:center; gap:8px; box-shadow:var(--shadow-1); }
.icon-btn svg{ display:block; }
.icon-btn:hover,.text-btn:hover{ background:var(--surface-2); }
.icon-btn:focus-visible,.text-btn:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
.chat-main{ display:grid; grid-template-columns:280px 1fr; min-height:0; height:100%; overflow-x:hidden; }
.chat-content{ grid-column:2; display:grid; grid-template-rows:1fr auto; min-height:0; transition:transform .2s ease; }
.chat-sidebar{ background:var(--surface); border-right:1px solid var(--border); padding:12px; display:flex; flex-direction:column; gap:var(--gap-3); transform:translateX(0); transition:transform .2s ease; position:relative; z-index:5; height:100%; }
.chat-root[data-sidebar="closed"] .chat-sidebar{ transform:translateX(-100%); }
.sidebar-header{ display:flex; align-items:center; justify-content:space-between; }
.sidebar-header h2{ font-size:14px; margin:0; }
.quick-links-label{ font-size:14px; margin:0 0 14px; color:#008CFF; font-weight:500; align-self:flex-start; }
.sidebar-list{ display:grid; gap:6px; }
.sidebar-item{ width:100%; text-align:left; padding:10px 12px; border-radius:var(--radius); background:var(--surface-2); border:1.25px solid color-mix(in oklab, var(--border) 70%, black 8%); color:var(--text); display:grid; grid-template-columns:auto 1fr; gap:8px; align-items:center; cursor:pointer; }
.sidebar-item .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); }
.sidebar-item:hover{ filter:brightness(0.98); }
.sidebar-link{ height: 150%;width: 80%; margin:0 auto; text-align:center; padding:8px 10px; border-radius:calc(var(--radius) - 4px); background:var(--surface-2); border:1px solid var(--border); color:var(--text); display:flex; justify-content:center; align-items:center; gap:8px; cursor:pointer; font-size:14px; }
.sidebar-link .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); }
.sidebar-link .links{ color:#008CFF; margin:0; font-weight:500; }
.sidebar-link:hover{ filter:brightness(0.98); }
.sidebar-bottom{ margin-top:auto; margin-bottom:32px; display:flex; flex-direction:column; gap:10px; padding-top:12px; border-top:1.25px solid color-mix(in oklab, var(--border) 70%, black 8%); }
.chat-messages{ position:relative; background:linear-gradient(0deg,var(--bg),var(--bg)); padding:16px 16px; overflow:auto; display:grid; gap:8px; align-content:start; grid-template-columns: 1fr min(100% - 32px, 800px) 1fr; justify-items:center; min-height:0; z-index:1; }
.chat-messages > .message{ grid-column:2; }
.chat-messages > .typing-indicator{ grid-column:2; }

.chat-watermark{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:0; }
.chat-watermark img{ max-width:60%; max-height:60%; opacity:0.1; }

.chat-messages > .message, .chat-messages > .typing-indicator{ position:relative; z-index:1; }
.chat-composer{ position:static; background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow-2); display:grid; grid-template-columns:1fr auto; gap:8px; padding:10px; width:min(100% - 32px, 800px); margin:8px auto 16px; -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); background: var(--surface); background: color-mix(in oklab, var(--surface) 80%, transparent); }
.chat-composer input[type="text"],
.chat-composer textarea{ width:100%; font-size:var(--text-size); padding:12px 14px; border-radius:var(--radius); border:1px solid var(--border); background:var(--surface-2); color:var(--text); resize:none; }
.chat-composer input[type="text"]::placeholder,
.chat-composer textarea::placeholder{ color:var(--muted-2); }
.chat-composer input[type="text"]:focus-visible,
.chat-composer textarea:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
.send-btn{ appearance:none; background:var(--accent); color:var(--accent-contrast); border:none; border-radius:var(--radius); padding:0 14px; font-weight:600; display:inline-flex; align-items:center; gap:8px; cursor:pointer; box-shadow:var(--shadow-2); }
.send-btn:hover{ filter:brightness(0.97); }
.send-btn:disabled{ opacity:.55; cursor:not-allowed; }
.message{ display:grid; gap:4px; max-width:var(--max-msg-width); }
.message .timestamp{ font-size:var(--timestamp-size); color:var(--muted); margin-top:4px; }
.message.user{ justify-self:end; text-align:right; }
.message.bot,.message.system,.message.image.bot{ justify-self:start; text-align:left; }
.message .bubble{ display:inline-block; padding:10px 12px; border-radius:var(--radius); background:var(--bot-bubble); color:var(--text); border:1px solid var(--border); box-shadow:var(--shadow-1); line-height:1.35; }
.message.user .bubble{ background:var(--user-bubble); color:var(--user-text); border-color:transparent; }
.message.system{ justify-self:center; text-align:center; }
.message.system .bubble{ background:var(--system-bubble); color:var(--muted); border-style:dashed; }
.message.bot .bubble{ border-top-left-radius:var(--radius); border-top-right-radius:var(--radius); }
.message.user .bubble{ border-top-left-radius:var(--radius); border-top-right-radius:var(--radius); }
.message.bot + .message.bot .bubble{ border-top-left-radius:var(--radius-tight); }
.message.user + .message.user .bubble{ border-top-right-radius:var(--radius-tight); }
.message.image .bubble{ padding:8px; }
.message.image .bubble img{ display:block; width:100%; height:auto; max-width:var(--max-image-width); border-radius:calc(var(--radius) - 2px); object-fit:cover; }
.message.image .bubble .caption{ margin-top:6px; font-size:12px; color:var(--muted); }
.typing-indicator{ display:inline-flex; gap:6px; align-items:center; padding:10px 12px; border-radius:var(--radius); background:var(--bot-bubble); border:1px solid var(--border); box-shadow:var(--shadow-1); width:fit-content; }
.typing-indicator span{ width:6px; height:6px; border-radius:50%; background:var(--muted); display:inline-block; animation:chat-bounce 1.2s infinite ease-in-out; }
.typing-indicator span:nth-child(2){ animation-delay:.15s; }
.typing-indicator span:nth-child(3){ animation-delay:.30s; }
@keyframes chat-bounce{ 0%,80%,100%{ transform:translateY(0); opacity:.6; } 40%{ transform:translateY(-4px); opacity:1; } }
@media (max-width:900px){ .chat-main{ grid-template-columns:0 1fr; } .chat-root[data-sidebar="open"] .chat-main{ grid-template-columns:260px 1fr; } .chat-root{ --sidebar-w:260px; --center-nudge:0px; } }

@media (min-width: 901px){
  /* When the sidebar is hidden on wide screens, shift the entire chat-content
     left by the sidebar width so the content recenters into the freed space */
  .chat-root[data-sidebar="closed"] .chat-content{ transform: translateX(calc(var(--sidebar-w) / -2)); }
  .chat-root[data-sidebar="open"] .chat-content{ transform: none; }
}
@media (max-width:480px){ .chat-header{ padding:8px 10px; } .chat-messages{ padding:12px 0; } .chat-composer{ padding:8px; } .send-btn{ padding:0 12px; } }
.chat-messages a{ color:var(--accent); }
.chat-messages code{ font-family:var(--font-mono); background:var(--surface-2); padding:2px 4px; border-radius:6px; }
.chat-messages pre{ margin:6px 0; background:var(--surface-2); padding:10px; border-radius:10px; overflow:auto; border:1px solid var(--border); }
.chat-messages pre code{ background:transparent; padding:0; border-radius:0; display:block; white-space:pre; }

/* Landing page styles (match main app typography & style) */
.landing-root{ display:flex; flex-direction:column; align-items: center; justify-content:center; min-height:100dvh; background:#f7f7f9; color:#111827; padding:24px; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif; }
.landing-card{ width:100%; max-width:720px; background:#ffffff; border:1.5px solid rgba(229,231,235,0.95); border-radius:14px; padding:36px 28px; box-shadow:0 6px 18px rgba(0,0,0,0.08); text-align:center; }
.landing-title{ margin:0 0 8px; font-size:28px; letter-spacing:0.2px; color:#111827; font-weight:700; }
.landing-sub{ margin:0 0 20px; color:#6b7280; }
.login-btn{ appearance:none; background:#2b7fff; color:#ffffff; border:none; border-radius:14px; padding:10px 20px; font-weight:700; font-size:16px; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.06); }
.register-btn{ appearance:none; background:#2b7fff; color:#ffffff; border:none; border-radius:14px; padding:10px 20px; font-weight:700; font-size:16px; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.06); }
.guest-btn{ appearance:none; background:#828ea0; color:#ffffff; border:none; border-radius:14px; padding:10px 20px; font-weight:700; font-size:16px; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.06); }
.login-btn:hover{ filter:brightness(0.98); }
.landing-footer{ margin-top:18px; color:#9ca3af; font-size:13px; }
.button-row { display: flex; justify-content: center; gap: 12px; margin-top: 15px; }
.button-row button { flex: 1; padding: 10px 20px; font-size: 16px; border-radius: 14px; border: none; cursor: pointer;}

/* Login form inside landing card */
.login-form{ display:flex; flex-direction:column; gap:10px; margin-top:16px; }
.login-label{ font-size:13px; text-align:left; color:var(--muted); }
.login-input{ font-size:15px; padding:10px 12px; border-radius:8px; border:1px solid #c7ccd1; background:var(--surface-2); color:var(--text); width:100%; box-sizing:border-box; box-shadow: inset 0 1px 2px rgba(0,0,0,0.03); }
.login-input::placeholder{ color:grey; }
.login-input:focus{ outline:2px solid color-mix(in oklab, var(--accent) 60%, transparent); }

/* Box around the username/password fields */
.login-fields{ display:flex; flex-direction:column; gap:8px; padding:12px; border-radius:10px; background:color-mix(in oklab, var(--surface) 96%, var(--surface-2) 4%); }
.logo-container { text-align: center; margin-top: -50px; margin-bottom: 20px; }
.logo-container img { width: 600px; height: auto; opacity: 0.95;}

/* Landing actions (top-right controls inside landing card) */
.landing-actions{ display:flex; justify-content:flex-end; margin-bottom:8px; }

/* Landing-specific theme variants. These mirror the main app's theme variables
  so the landing page can enter dark / auto / light modes independently. */
@media (prefers-color-scheme: dark){}
.landing-root.theme-dark{ --bg:#0f1115; --surface:#141821; --surface-2:#0e121a; --border:#2a2f3a; --text:#e5e7eb; --muted:#a3a8b4; --muted-2:#7b8190; --accent:#2b7fff; --accent-contrast:#0b1020; --bot-bubble:#1a2030; --user-bubble:#7aa2ff; --user-text:#0b1020; --system-bubble:#101827; --shadow-1:0 1px 2px rgba(0,0,0,0.35),0 2px 6px rgba(0,0,0,0.25); --shadow-2:0 6px 18px rgba(0,0,0,0.25); }
.landing-root.theme-light{ --bg:#f7f7f9; --surface:#ffffff; --surface-2:#f1f2f5; --border:#e5e7eb; --text:#111827; --muted:#6b7280; --muted-2:#9ca3af; --accent:#2b7fff; --accent-contrast:#ffffff; --bot-bubble:#ffffff; --user-bubble:#2b7fff; --user-text:#ffffff; --system-bubble:#eef2ff; --shadow-1:0 1px 2px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.06); --shadow-2:0 6px 18px rgba(0,0,0,0.08); }

/* Apply variables to landing elements */
.landing-root.theme-dark, .landing-root.theme-light{ background:var(--bg); color:var(--text); }
.landing-root.theme-dark .landing-card, .landing-root.theme-light .landing-card{ background:var(--surface); border-color:var(--border); box-shadow:var(--shadow-2); }
.landing-root.theme-dark .login-input, .landing-root.theme-light .login-input{ background:var(--surface-2); color:var(--text); border-color:var(--border); }
.landing-root.theme-dark .login-btn, .landing-root.theme-light .login-btn{ background:var(--accent); color:var(--accent-contrast); }
.landing-root.theme-dark .register-btn, .landing-root.theme-light .register-btn{ background:var(--accent); color:var(--accent-contrast); }
.landing-root.theme-dark .landing-title, .landing-root.theme-light .landing-title{ color:var(--text); }
